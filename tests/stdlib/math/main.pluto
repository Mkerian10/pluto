import std.math

test "abs of positive" {
    expect(math.abs(5)).to_equal(5)
    expect(math.abs(1)).to_equal(1)
    expect(math.abs(100)).to_equal(100)
}

test "abs of negative" {
    expect(math.abs(-5)).to_equal(5)
    expect(math.abs(-1)).to_equal(1)
    expect(math.abs(-100)).to_equal(100)
}

test "abs of zero" {
    expect(math.abs(0)).to_equal(0)
}

test "min" {
    expect(math.min(1, 2)).to_equal(1)
    expect(math.min(2, 1)).to_equal(1)
    expect(math.min(5, 5)).to_equal(5)
    expect(math.min(-3, 3)).to_equal(-3)
    expect(math.min(0, -1)).to_equal(-1)
}

test "max" {
    expect(math.max(1, 2)).to_equal(2)
    expect(math.max(2, 1)).to_equal(2)
    expect(math.max(5, 5)).to_equal(5)
    expect(math.max(-3, 3)).to_equal(3)
    expect(math.max(0, -1)).to_equal(0)
}

test "pow basic" {
    expect(math.pow(2, 0)).to_equal(1)
    expect(math.pow(2, 1)).to_equal(2)
    expect(math.pow(2, 8)).to_equal(256)
    expect(math.pow(3, 3)).to_equal(27)
    expect(math.pow(10, 3)).to_equal(1000)
}

test "pow edge cases" {
    expect(math.pow(0, 0)).to_equal(1)
    expect(math.pow(0, 5)).to_equal(0)
    expect(math.pow(1, 100)).to_equal(1)
    expect(math.pow(-2, 3)).to_equal(-8)
    expect(math.pow(-2, 4)).to_equal(16)
}

test "pow negative exponent returns zero" {
    expect(math.pow(2, -1)).to_equal(0)
    expect(math.pow(5, -10)).to_equal(0)
}

test "clamp within bounds" {
    expect(math.clamp(5, 0, 10)).to_equal(5)
    expect(math.clamp(0, 0, 10)).to_equal(0)
    expect(math.clamp(10, 0, 10)).to_equal(10)
}

test "clamp below lower bound" {
    expect(math.clamp(-5, 0, 10)).to_equal(0)
    expect(math.clamp(-100, -10, 10)).to_equal(-10)
}

test "clamp above upper bound" {
    expect(math.clamp(15, 0, 10)).to_equal(10)
    expect(math.clamp(100, -10, 10)).to_equal(10)
}

test "PI constant" {
    expect(math.PI() > 3.14).to_be_true()
    expect(math.PI() < 3.15).to_be_true()
}

test "E constant" {
    expect(math.E() > 2.71).to_be_true()
    expect(math.E() < 2.72).to_be_true()
}

test "TAU constant" {
    expect(math.TAU() > 6.28).to_be_true()
    expect(math.TAU() < 6.29).to_be_true()
}

test "sign positive" {
    expect(math.sign(5)).to_equal(1)
    expect(math.sign(1000000)).to_equal(1)
}

test "sign negative" {
    expect(math.sign(-5)).to_equal(-1)
    expect(math.sign(-1)).to_equal(-1)
}

test "sign zero" {
    expect(math.sign(0)).to_equal(0)
}

test "clamp_float within bounds" {
    expect(math.clamp_float(5.0, 0.0, 10.0) == 5.0).to_be_true()
}

test "clamp_float below" {
    expect(math.clamp_float(-1.0, 0.0, 10.0) == 0.0).to_be_true()
}

test "clamp_float above" {
    expect(math.clamp_float(15.0, 0.0, 10.0) == 10.0).to_be_true()
}

test "clamp_float degenerate" {
    expect(math.clamp_float(0.0, 0.0, 0.0) == 0.0).to_be_true()
}

test "gcd basic" {
    expect(math.gcd(12, 8)).to_equal(4)
    expect(math.gcd(7, 13)).to_equal(1)
    expect(math.gcd(100, 100)).to_equal(100)
}

test "gcd with zero" {
    expect(math.gcd(0, 5)).to_equal(5)
    expect(math.gcd(5, 0)).to_equal(5)
    expect(math.gcd(0, 0)).to_equal(0)
}

test "gcd negative" {
    expect(math.gcd(-12, 8)).to_equal(4)
}

test "lcm basic" {
    expect(math.lcm(4, 6)).to_equal(12)
    expect(math.lcm(3, 7)).to_equal(21)
    expect(math.lcm(12, 12)).to_equal(12)
}

test "lcm with zero" {
    expect(math.lcm(0, 5)).to_equal(0)
    expect(math.lcm(5, 0)).to_equal(0)
}

test "factorial" {
    expect(math.factorial(0)).to_equal(1)
    expect(math.factorial(1)).to_equal(1)
    expect(math.factorial(5)).to_equal(120)
    expect(math.factorial(10)).to_equal(3628800)
}

test "is_even" {
    expect(math.is_even(0)).to_be_true()
    expect(math.is_even(2)).to_be_true()
    expect(math.is_even(3)).to_be_false()
    expect(math.is_even(-4)).to_be_true()
}

test "is_odd" {
    expect(math.is_odd(0)).to_be_false()
    expect(math.is_odd(1)).to_be_true()
    expect(math.is_odd(2)).to_be_false()
    expect(math.is_odd(-3)).to_be_true()
}

test "to_radians" {
    let r180 = math.to_radians(180.0)
    expect(r180 > 3.14).to_be_true()
    expect(r180 < 3.15).to_be_true()
    expect(math.to_radians(0.0) == 0.0).to_be_true()
    let r90 = math.to_radians(90.0)
    expect(r90 > 1.57).to_be_true()
    expect(r90 < 1.58).to_be_true()
}

test "to_degrees" {
    let d = math.to_degrees(math.PI())
    expect(d > 179.9).to_be_true()
    expect(d < 180.1).to_be_true()
    expect(math.to_degrees(0.0) == 0.0).to_be_true()
}
